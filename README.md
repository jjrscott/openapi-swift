At time of writing the Swift code generated by [openapi-generator](https://github.com/OpenAPITools/openapi-generator) contains a **lot** of executable code. This is fine for other languages but this wastes Swift main strength: its type system.

This project attempts to demonstrate the absolute bare minimum of translation to convert an OpenAPI yaml file to useful into Swift with zero or very little code.

## Features

Other features include:
- Simple, understandable mapping for calls
- Removal of complexity for models
- Simplified mocking.
- Simple connection into any process you want eg, RxSwift, Result or async/await
- No generated function to step through when debugging (`path(description:)` excepted)

## Generated code

The generated code consists of the following:
- Definitions for all components (same as the current process)
- An enum to represent each operation
- A struct with static functions to encode the operation, its parameters, method, and body.
- A function `path(description:)` on the enum to assist generating the path.

## Example

Take a look the the enclosed PetStore package to see it in action. Two key file are `Executor.swift` and `MockExecutor.swift` which show the two most likely use-cases which need to be handled in any API generation scenario.

## API calls

### openapi-generator

##### Generated

```swift
struct RequestBuilder<Response> {
    func execute() async throws -> Response
}

class PetStore {
    class func createPets(_ body: Pet) -> RequestBuilder<String>
}
```

##### User
```swift
let petId = try await PetStore.createPets(pet).execute()
```

### openapi-swift

##### Generated

```swift
enum PetStore {
    enum Operation {
        case createPets
    }

    struct Endpoint<Response> {
        static func createPets(_ body: Pet) -> Endpoint<PetId> {
            .init(operation: .createPets, method: "POST", body: body)
        }
    }
}
```

##### User

```swift
struct Executor {
    func execute<T>(endpoint: PetStore.Endpoint<T>) async throws -> T
}

let petId = try await Executor().execute(endpoint: .createPets(pet))
```

## Path parameters

Use [DefaultStringInterpolation](https://developer.apple.com/documentation/swift/defaultstringinterpolation) instead of a generated API helper class:

### openapi-generator

```swift
var path = "/pets/{petId}"
let petIdPreEscape = "\(APIHelper.mapValueToPathItem(petId))"
let petIdPostEscape = snPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
path = path.replacingOccurrences(of: "{petId}", with: petIdPostEscape, options: .literal, range: nil)
```

### openapi-swift

##### Generated

```swift
enum Operation {
    ...
    func path(description: (Any) -> String) -> String {
        switch self {
        case .createPets: return "/pets"
        ...
        }
    }
}
```

##### User

```swift
let path = endpoint.operation.path { value in
    let value = String(describing: value)
    return value.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? value
}
```

## Outstanding questions

1. Should the body parameter be required to be `Encodable` and should it be added to the enum (it is not currently)?
2. Does this system function for any other likely scenario?
3. Can we use property wrappers to encode constraints?